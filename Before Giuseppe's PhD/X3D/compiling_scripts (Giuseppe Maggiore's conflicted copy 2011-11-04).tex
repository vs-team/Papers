%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% compiling_scripts.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

SCRIPTS as COROUTINES

COMBINING COROUTINES into LARGER and PARALLEL SCRIPTS

SCRIPTS USE A PORTION OF THE STATE DEFINITION

A SIMPLE ELEVATOR SCRIPT


\begin{lstlisting}
let my_script (Box1:Box)=
  script {
    let rand = new Random()
    do! parallel
      script { 
        do! wait 10.0f 
        do! set_render_text "text1" 
              (Vector2(50.0f,50.0f)) 
              Color.White Vector2.One
        do! wait 2.0f 
        do Box1.position.Y <- rand.Next()
        do! remove_render_text
      }
      script { 
        do! wait 6.0f 
        do! set_render_text "text2"
              (Vector2(100.0f,100.0f)) 
              Color.White Vector2.One
        do! wait 3.0f 
        do Box1.position.Y <- rand.Next
        do! remove_render_text
      }
    }
\end{lstlisting}
